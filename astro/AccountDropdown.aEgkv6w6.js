import{j as e}from"./jsx-runtime.hJzLw87X.js";import{r as n}from"./index.TBYTbSNu.js";import{i as f}from"./jwt.29ZsqLlk.js";import{l as g}from"./navigation.MRQ7dh1c.js";import{c as p}from"./createLucideIcon.bqzTQrq-.js";import{U as x}from"./users-round.ioA0wXy0.js";import{P as u}from"./plus.B9ffnOah.js";import{M as j}from"./map.3U-SAMxx.js";import{C as w,a as N}from"./chevron-right.XSqEmt7a.js";import{c as d}from"./team.1FROKlCe.js";import{b as y}from"./http.kuYOMQBZ.js";import{u as b}from"./use-toast.g_ZHNYU9.js";import{u as v}from"./index.eTXpPq2U.js";import{U as k}from"./users.MyWc15p7.js";import{u as C}from"./use-outside-click.ZVJDf3ba.js";import{C as R}from"./CreateRoadmapModal.ZzJl3FFl.js";import{C as L}from"./chevron-down.1Yx0gWkM.js";import"./index.2T9xAa-2.js";import"./index.rS7vpNfE.js";import"./toast.21LYZN4o.js";import"./Modal.IVGEowL_.js";import"./use-keydown.xXqo6bcR.js";import"./classname.FPT-7uOX.js";import"./bundle-mjs.jRY21tqg.js";import"./loader-circle.hmndB6XB.js";/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=p("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=p("SquareUserRound",[["path",{d:"M18 21a6 6 0 0 0-12 0",key:"kaz2du"}],["circle",{cx:"12",cy:"11",r:"4",key:"1gt34v"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=p("UserRound",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);function U(a){const{setIsTeamsOpen:o,onCreateRoadmap:r}=a;return e.jsxs("ul",{children:[e.jsx("li",{className:"px-1",children:e.jsxs("a",{href:"/account",className:"group flex items-center gap-2 rounded py-2 pl-3 pr-2 text-sm font-medium text-slate-100 hover:bg-slate-700",children:[e.jsx(T,{className:"h-4 w-4 stroke-[2.5px] text-slate-400 group-hover:text-white"}),"Account"]})}),e.jsx("li",{className:"px-1",children:e.jsxs("a",{href:"/account/update-profile",className:"group flex items-center justify-between gap-2 rounded py-2 pl-3 pr-2 text-sm font-medium text-slate-100 hover:bg-slate-700",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-4 w-4 stroke-[2.5px] text-slate-400 group-hover:text-white"}),"My Profile"]}),e.jsx("span",{className:"rounded-sm bg-yellow-300 px-1 text-xs uppercase tracking-wide text-black",children:"New"})]})}),e.jsx("li",{className:"px-1",children:e.jsxs("a",{href:"/account/friends",className:"group flex items-center gap-2 rounded py-2 pl-3 pr-2 text-sm font-medium text-slate-100 hover:bg-slate-700",children:[e.jsx(x,{className:"h-4 w-4 stroke-[2px] text-slate-400 group-hover:text-white"}),"Friends"]})}),e.jsx("li",{className:"mt-1 border-t border-t-gray-700/60 px-1 pt-1",children:e.jsxs("button",{onClick:()=>{r()},className:"group flex w-full items-center gap-2 rounded py-2 pl-3 pr-2 text-left text-sm font-medium text-slate-100 hover:bg-slate-700",children:[e.jsx(u,{className:"h-4 w-4 stroke-[2px] text-slate-400 group-hover:text-white"}),"New Roadmap"]})}),e.jsx("li",{className:"border-b border-b-gray-700/60 px-1 pb-1",children:e.jsxs("a",{href:"/account/roadmaps",className:"group flex items-center gap-2 rounded py-2 pl-3 pr-2 text-sm font-medium text-slate-100 hover:bg-slate-700",children:[e.jsx(j,{className:"h-4 w-4 stroke-[2px] text-slate-400 group-hover:text-white"}),"Roadmaps"]})}),e.jsx("li",{className:"px-1 pt-1",children:e.jsxs("button",{className:"group flex w-full items-center justify-between rounded py-2 pl-3 pr-2 text-sm font-medium text-slate-100 hover:bg-slate-700",onClick:()=>o(!0),children:[e.jsxs("span",{className:"flex items-center gap-2.5",children:[e.jsx(x,{className:"h-4 w-4 stroke-[2px] text-slate-400 group-hover:text-white"}),"Teams"]}),e.jsx(w,{className:"h-4 w-4 shrink-0 stroke-[2.5px] text-slate-400 group-hover:text-white"})]})}),e.jsx("li",{className:"px-1",children:e.jsxs("button",{className:"group flex w-full items-center gap-2 rounded py-2 pl-3 pr-2 text-left text-sm font-medium text-slate-100 hover:bg-slate-700",type:"button",onClick:g,children:[e.jsx(I,{className:"h-4 w-4 stroke-[2px] text-slate-400 group-hover:text-white"}),"Logout"]})})]})}function M(a){const{setIsTeamsOpen:o}=a,r=b(),i=v(d),[s,m]=n.useState(!0);async function c(){if(i.length>0)return;m(!0);const{response:t,error:l}=await y("https://api.roadmap.sh/v1-get-user-teams");if(l||!t){r.error(l?.message||"Something went wrong");return}d.set(t)}n.useEffect(()=>{c().finally(()=>m(!1))},[]);const h=s&&e.jsxs("div",{className:"mt-2 flex animate-pulse flex-col gap-1 px-1 text-center",children:[e.jsx("div",{className:"h-[35px] rounded-md bg-gray-700"}),e.jsx("div",{className:"h-[35px] rounded-md bg-gray-700"}),e.jsx("div",{className:"h-[35px] rounded-md bg-gray-700"})]});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsx("button",{className:"mt-1 flex h-5 w-5 items-center justify-center rounded text-slate-400 hover:bg-slate-50/10 hover:text-slate-50",onClick:()=>o(!1),children:e.jsx(N,{className:"h-4 w-4 stroke-[2.5px]"})}),e.jsx("a",{className:"mt-1 flex h-5 w-5 items-center justify-center rounded text-slate-400 hover:bg-slate-50/10 hover:text-slate-50",href:"/team/new",children:e.jsx(u,{className:"h-4 w-4 stroke-[2.5px]"})})]}),h,!s&&e.jsxs("ul",{className:"mt-2",children:[i?.map(t=>{let l="";return t.status==="invited"?l=`/respond-invite?i=${t.memberId}`:t.status==="joined"&&(l=`/team/progress?t=${t._id}`),e.jsx("li",{className:"px-1",children:e.jsx("a",{href:l,className:"block truncate rounded px-4 py-2 text-sm font-medium text-slate-100 hover:bg-slate-700",children:t.name})},t._id)}),i.length===0&&!s&&e.jsx("li",{className:"mt-2 px-1 text-center",children:e.jsxs("p",{className:"block rounded px-4 py-2 text-sm font-medium text-slate-500",children:[e.jsx(k,{className:"mx-auto mb-2 h-7 w-7 text-slate-600"}),"No teams found."," ",e.jsx("a",{className:"font-medium text-slate-400 underline underline-offset-2 hover:text-slate-300",href:"/team/new",children:"Create a team"}),"."]})})]})]})}function ae(){const a=n.useRef(null),[o,r]=n.useState(!1),[i,s]=n.useState(!1),[m,c]=n.useState(!1);return C(a,()=>{r(!1),s(!1)}),f()?e.jsxs("div",{className:"relative z-50 animate-fade-in",children:[m&&e.jsx(R,{onClose:()=>{c(!1)}}),e.jsxs("button",{className:"flex h-8 w-40 items-center justify-center gap-1.5 rounded-full bg-gradient-to-r from-purple-500 to-purple-700 px-4 py-2 text-sm font-medium text-white hover:from-purple-500 hover:to-purple-600",onClick:()=>{s(!1),r(!o)},children:[e.jsxs("span",{className:"inline-flex items-center",children:["Account ",e.jsx("span",{className:"text-gray-300",children:"/"})," Teams"]}),e.jsx(L,{className:"h-4 w-4 shrink-0 stroke-[2.5px]"})]}),o&&e.jsx("div",{ref:a,className:"absolute right-0 z-50 mt-2 min-h-[152px] w-48 rounded-md bg-slate-800 py-1 shadow-xl",children:i?e.jsx(M,{setIsTeamsOpen:s}):e.jsx(U,{onCreateRoadmap:()=>{c(!0),r(!1)},setIsTeamsOpen:s})})]}):null}export{ae as AccountDropdown};
