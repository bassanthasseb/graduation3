import{j as s}from"./jsx-runtime.hJzLw87X.js";import{r}from"./index.TBYTbSNu.js";import{b as S,a as y}from"./http.kuYOMQBZ.js";import{s as p}from"./page.WSJoHwTn.js";import{u as k}from"./index.eTXpPq2U.js";import{a as $}from"./jwt.29ZsqLlk.js";import{X as v}from"./x.IGy8lYK3.js";import"./index.rS7vpNfE.js";import"./createLucideIcon.bqzTQrq-.js";function z(l){const{gaPageIdentifier:n}=l,c=k(p),[m,d]=r.useState(null),[a,h]=r.useState(),f=async()=>{const o=window.location.pathname;if(o==="/"||o==="/best-practices"||o==="/roadmaps"||o.startsWith("/guides")||o.startsWith("/videos")||o.startsWith("/account")||o.startsWith("/team"))return;const{response:e,error:t}=await S("https://api.roadmap.sh/v1-get-sponsor",{href:window.location.pathname});if(t){console.error(t);return}e?.sponsor&&(h(e.sponsor),d(e?.id||null),window.fireEvent({category:"SponsorImpression",action:`${e.sponsor?.company} Impression`,label:e.sponsor.gaLabel||`${n} / ${e.sponsor?.company} Link`}))},x=async o=>{const{response:e,error:t}=await y(`https://api.roadmap.sh/v1-view-sponsor/${o}`,{});if(t||!e){console.error(t);return}$(o)};if(r.useEffect(()=>{window.setTimeout(f)},[]),c||!a)return null;const{url:u,title:w,imageUrl:g,description:b,company:i,gaLabel:j}=a;return s.jsxs("a",{href:u,target:"_blank",rel:"noopener sponsored nofollow",className:"fixed bottom-[15px] right-[15px] z-50 flex max-w-[350px] bg-white shadow-lg outline-0 outline-transparent",onClick:async()=>{window.fireEvent({category:"SponsorClick",action:`${i} Redirect`,label:j||`${n} / ${i} Link`}),await x(m||"")},children:[s.jsx("span",{className:"absolute right-1.5 top-1.5 text-gray-300 hover:text-gray-800","aria-label":"Close",onClick:o=>{o.preventDefault(),p.set(!0)},children:s.jsx(v,{className:"h-4 w-4"})}),s.jsx("img",{src:g,className:"block h-[150px] object-cover lg:h-[169px] lg:w-[118.18px]",alt:"Sponsor Banner"}),s.jsxs("span",{className:"flex flex-1 flex-col justify-between text-sm",children:[s.jsxs("span",{className:"p-[10px]",children:[s.jsx("span",{className:"mb-0.5 block font-semibold",children:w}),s.jsx("span",{className:"block text-gray-500",children:b})]}),s.jsx("span",{className:"sponsor-footer",children:"Partner Content"})]})]})}export{z as PageSponsor};
