import{D as d}from"./index.es.3QVITkr_.js";import{i as h}from"./jwt.29ZsqLlk.js";import{r as l,u as p,a as u,b as g}from"./resource-progress.WiwNbDeh.js";import{p as o}from"./page.WSJoHwTn.js";import{s as m}from"./popup.xZrd6hzK.js";import{r as f}from"./dom.PQSz9BVV.js";import{s as w}from"./browser.nocSzYoH.js";import"./hoisted.xGUHk6_V.js";import"./navigation.MRQ7dh1c.js";import"./http.kuYOMQBZ.js";import"./roadmap.mY9zKeY8.js";import"./index.2T9xAa-2.js";import"./index.rS7vpNfE.js";class I{resourceId;resourceType;jsonUrl;loaderHTML;containerId;loaderId;constructor(){this.resourceId="",this.resourceType="",this.jsonUrl="",this.loaderHTML=null,this.containerId="resource-svg-wrap",this.loaderId="resource-loader",this.init=this.init.bind(this),this.onDOMLoaded=this.onDOMLoaded.bind(this),this.jsonToSvg=this.jsonToSvg.bind(this),this.handleSvgClick=this.handleSvgClick.bind(this),this.handleSvgRightClick=this.handleSvgRightClick.bind(this),this.prepareConfig=this.prepareConfig.bind(this),this.switchRoadmap=this.switchRoadmap.bind(this),this.updateTopicStatus=this.updateTopicStatus.bind(this)}get loaderEl(){return document.getElementById(this.loaderId)}get containerEl(){return document.getElementById(this.containerId)}prepareConfig(){if(!this.containerEl)return!1;this.loaderHTML=this.loaderEl.innerHTML;const t=this.containerEl.dataset;return this.resourceType=t.resourceType,this.resourceId=t.resourceId,!0}jsonToSvg(t){return t?this.containerEl?(this.containerEl.innerHTML=this.loaderHTML,fetch(t).then(e=>e.json()).then(e=>d(e,{fontURL:"/fonts/balsamiq.woff2"})).then(e=>{f(this.containerEl,e)}).then(()=>l(this.resourceType,this.resourceId)).catch(e=>{if(!this.containerEl)return;const r=`
          <strong>There was an error.</strong><br>
          
          Try loading the page again. or submit an issue on GitHub with following:<br><br>

          ${e.message} <br /> ${e.stack}
        `;this.containerEl.innerHTML=`<div class="error py-5 text-center text-red-600 mx-auto">${r}</div>`})):null:(console.error("jsonUrl not defined in frontmatter"),null)}onDOMLoaded(){if(!this.prepareConfig())return;const e=new URLSearchParams(window.location.search).get("r");e?this.switchRoadmap(`/${e}.json`):this.jsonToSvg(this.resourceType==="roadmap"?`/${this.resourceId}.json`:`/best-practices/${this.resourceId}.json`)}switchRoadmap(t){this.containerEl?.setAttribute("style","");const e=t.split("/").pop()?.replace(".json",""),r=this.resourceType[0];w({[r]:e}),this.jsonToSvg(t)?.then(()=>{})}updateTopicStatus(t,e){if(!h()){m();return}o.set("Updating progress"),p({resourceId:this.resourceId,resourceType:this.resourceType,topicId:t},e).then(()=>{u(t,e),g()}).catch(r=>{alert("Something went wrong, please try again."),console.error(r)}).finally(()=>{o.set("")})}handleSvgRightClick(t){const e=t.target?.closest("g")||{},r=e.dataset?e.dataset.groupId:"";if(!r||e.classList.contains("removed"))return;t.preventDefault();const i=e.classList.contains("done"),n=r.replace(/^\d+-/,"");n.startsWith("ext_link:")||this.updateTopicStatus(n,i?"pending":"done")}handleSvgClick(t){const e=t.target?.closest("g")||{},r=e.dataset?e.dataset.groupId:"";if(!r||(t.stopImmediatePropagation(),e.classList.contains("removed")))return;if(/^ext_link/.test(r)){const s=r.replace("ext_link:","");s.startsWith("roadmap.sh")?window.location.href=`https://${s}`:(window.fireEvent({category:"RoadmapExternalLink",action:`${this.resourceType} / ${this.resourceId}`,label:s}),window.open(`https://${s}`));return}if(/^json:/.test(r)){const s=r.replace("json:","");this.switchRoadmap(s);return}if(/^check:/.test(r)){window.dispatchEvent(new CustomEvent(`${this.resourceType}.topic.toggle`,{detail:{topicId:r.replace("check:",""),resourceType:this.resourceType,resourceId:this.resourceId}}));return}const i=r.replace(/^\d+-/,""),n=e.classList.contains("learning"),c=e.classList.contains("skipped");if(t.shiftKey){t.preventDefault(),this.updateTopicStatus(i,n?"pending":"learning");return}if(t.altKey){t.preventDefault(),this.updateTopicStatus(i,c?"pending":"skipped");return}window.dispatchEvent(new CustomEvent(`${this.resourceType}.topic.click`,{detail:{topicId:i,resourceId:this.resourceId,resourceType:this.resourceType}}))}init(){window.addEventListener("DOMContentLoaded",this.onDOMLoaded),window.addEventListener("click",this.handleSvgClick),window.addEventListener("contextmenu",this.handleSvgRightClick)}}const T=new I;T.init();class v{constructor(){this.init=this.init.bind(this),this.onScroll=this.onScroll.bind(this),this.shareIconsId="page-share-icons"}get shareIconsEl(){return document.getElementById(this.shareIconsId)}onScroll(){if(window.scrollY<100||window.innerWidth<1050)return this.shareIconsEl.classList.add("hidden"),null;this.shareIconsEl.classList.remove("hidden")}init(){this.shareIconsEl&&window.addEventListener("scroll",this.onScroll,{passive:!0})}}const L=new v;L.init();
